<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Dashboard</title>
<!--    add dashboard css-->
    <h:outputStylesheet name="main.css"/>
</h:head>
<body>
<!--    NAVIGATION SYSTEM -->
<h:form styleClass="nav-bar">
    <p:toolbar>
        <p:toolbarGroup>
            <h1><h:outputText value="Dashboard"/></h1>
            <p:commandButton value="Home" action="/index.xhtml"/>
        </p:toolbarGroup>
    </p:toolbar>
</h:form>
<p>Welcome to your dashboard! Here you can view all your saved games.
</p>
<!--        DISPLAY ALL GAMES SAVED -->
<!--        NOTE: HAVE TO RELOAD TO DISPLAY UPDATES TO DASHBOARD -->
<h:form id="gameTable">
    <p:dataTable value="#{userGamesBean.games}" var="game" styleClass="game-table">
<!--        <p:autoUpdate />-->
        <p:column headerText="Title" sortBy="#{game.name}">
            <h:outputText value="#{game.name}"/>
        </p:column>
        <p:column headerText="Genres" sortBy="#{game.genres}">
            <h:outputText value="#{game.genres}"/>
        </p:column>
        <p:column headerText="Rating" sortBy="#{game.aggregated_rating}">
            <h:outputText value="#{game.aggregated_rating}"/>
        </p:column>
<!--        <p:column headerText="Genres">-->
<!--            <p:dataTable value="#{gameGenreBean.getGameGenre(game.id)}" var="gameGenre" styleClass="game-genre">-->
<!--                <p:column>-->
<!--                    <h:outputText value="#{gameGenre.name}"/>-->
<!--                </p:column>-->
<!--            </p:dataTable>-->
<!--        </p:column>-->
<!--        <p:column>-->
<!--            <f:facet name="header">-->
<!--                <h:outputText value="Remove"/>-->
<!--            </f:facet>-->
<!--            <p:commandButton value="-" action="#{gameBean.removeGameFromDashboard(game)}"/>-->
<!--&lt;!&ndash;            <f:ajax event="keyup" execute="@this keyCode" listener="#{gameBean.removeGameFromDashboard(game)}" render="gameTable"/>&ndash;&gt;-->
<!--        </p:column>-->
    </p:dataTable>
</h:form>
</body>
</html>